<div class="w-[95%] mx-auto mt-3">
  @if (!isLoggedIn()) { <app-user-form />} @else{ @if(loadingSongs()){
  <div
    class="flex flex-col items-center justify-center w-fit mx-auto py-5 px-10"
  >
    <p class="text-center font-bold">Songs loading...</p>
    <div>
      <span class="loading loading-ball loading-lg"></span>
      <span class="loading loading-ball loading-lg"></span>
      <span class="loading loading-ball loading-lg"></span>
    </div>
  </div>
  }@else {
  <div class="flex flex-col">
    <app-storage-info />
    <div class="flex justify-between items-center my-2">
      <h1 class="font-bold text-2xl mb-2">
        {{ username() | titlecase }}'s Favorites
      </h1>
      <div class="flex gap-2">
        @if(reorders().length > 0) {
        <button class="btn btn-error text-white" (click)="saveReorders()">
          Save
        </button>
        <button class="btn btn-error text-white" (click)="cancelReorders()">
          Cancel
        </button>
        }
        <button class="btn" (click)="changeUser()">Change User</button>
      </div>
    </div>
    <ul class="flex flex-col gap-1 mb-36 relative">
      @if (loadingReorder()) {
      <div
        class="bg-base-300 bg-opacity-50 backdrop-blur-sm absolute w-full h-full inset-0 z-10 flex flex-col gap-3 items-center justify-center"
      >
        Applying reorder...
        <span class="loading loading-md"></span>
      </div>
      }
      <app-songs-wrapper
        [songs]="songs()"
        (onReorderSongs)="reorderSongs($event)"
      />
    </ul>
  </div>
  } }
</div>
