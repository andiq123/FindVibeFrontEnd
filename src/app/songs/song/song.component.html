@defer (on viewport){
<div
  class="rounded-lg py-1 px-2 flex justify-between items-center"
  [class]="{ 'bg-base-200': isActive(), 'bg-base-300': !isActive() }"
>
  <div class="grid grid-flow-col gap-3 items-center">
    <div class="w-14 rounded-lg overflow-hidden relative">
      <app-player-button
        [status]="status()"
        (onPlay)="play()"
        (onPause)="pause()"
        classes="absolute top-0 h-full w-full backdrop-brightness-50"
      />
      <img
        class="object-fill w-full h-full"
        [ngSrc]="song().image"
        [alt]="song().artist"
        width="10"
        height="10"
        referrerpolicy="no-referrer"
      />
    </div>
    <div>
      <app-moving-title [title]="song().title" [isActive]="isActive()" />
      <app-moving-title
        [title]="song().artist"
        [isActive]="isActive()"
        classes="text-xs"
      />
    </div>
  </div>
  @if (isAbleToAddToFav()) {
  <button class="btn btn-md w-14" (click)="toggleAddToFavorite()">
    @if(isLoadingFavorite()){
    <span class="loading loading-spinner loading-md"></span>
    }@else{ @if (isFavorited()) {
    <fa-icon [icon]="favoritedHeart" />
    } @else {
    <fa-icon [icon]="unFavoritedHeart" />
    } }
  </button>
  }
</div>
}@placeholder {
<p class="rounded-lg py-1 px-2 flex justify-between items-center bg-base-200">
  Song is loading...
</p>
}
